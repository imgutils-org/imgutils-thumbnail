# imgutils-thumbnail

[![Go Reference](https://pkg.go.dev/badge/github.com/imgutils-org/imgutils-thumbnail.svg)](https://pkg.go.dev/github.com/imgutils-org/imgutils-thumbnail)
[![Go Report Card](https://goreportcard.com/badge/github.com/imgutils-org/imgutils-thumbnail)](https://goreportcard.com/report/github.com/imgutils-org/imgutils-thumbnail)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

A simple, fast Go library for generating image thumbnails. Part of the [imgutils](https://github.com/imgutils-org) collection.

## Features

- Generate thumbnails maintaining aspect ratio
- Support for JPEG, PNG, and GIF output formats
- Configurable dimensions and quality settings
- High-quality CatmullRom interpolation
- File-based and in-memory operations

## Installation

```bash
go get github.com/imgutils-org/imgutils-thumbnail
```

## Quick Start

```go
package main

import (
    "log"
    "github.com/imgutils-org/imgutils-thumbnail"
)

func main() {
    // Simple one-liner to generate a thumbnail
    err := thumbnail.GenerateAndSave("input.jpg", "thumb.jpg", thumbnail.Options{
        Width:   150,
        Height:  150,
        Quality: 85,
    })
    if err != nil {
        log.Fatal(err)
    }
}
```

## Usage Examples

### Basic Thumbnail Generation

```go
package main

import (
    "image"
    "log"
    "os"

    "github.com/imgutils-org/imgutils-thumbnail"
)

func main() {
    // Load an image
    file, err := os.Open("photo.jpg")
    if err != nil {
        log.Fatal(err)
    }
    defer file.Close()

    src, _, err := image.Decode(file)
    if err != nil {
        log.Fatal(err)
    }

    // Generate thumbnail with default options (150x150)
    thumb := thumbnail.Generate(src, thumbnail.DefaultOptions())

    // Save as JPEG
    out, err := os.Create("thumbnail.jpg")
    if err != nil {
        log.Fatal(err)
    }
    defer out.Close()

    thumbnail.SaveJPEG(thumb, out, 85)
}
```

### Custom Dimensions

```go
// Create a larger thumbnail
opts := thumbnail.Options{
    Width:   300,
    Height:  200,
    Quality: 90,
}

thumb := thumbnail.Generate(src, opts)
```

### Generate from File Path

```go
// Load and generate in one step
thumb, err := thumbnail.GenerateFromFile("large-image.png", thumbnail.Options{
    Width:  200,
    Height: 200,
})
if err != nil {
    log.Fatal(err)
}
```

### Save in Different Formats

```go
// Save as PNG (lossless)
out, _ := os.Create("thumb.png")
thumbnail.SavePNG(thumb, out)

// Save as GIF
out, _ = os.Create("thumb.gif")
thumbnail.SaveGIF(thumb, out)

// Save as JPEG with custom quality
out, _ = os.Create("thumb.jpg")
thumbnail.SaveJPEG(thumb, out, 95) // High quality
```

## API Reference

### Types

#### Options

```go
type Options struct {
    Width   int // Target width (default: 150)
    Height  int // Target height (default: 150)
    Quality int // JPEG quality 1-100 (default: 85)
}
```

### Functions

| Function | Description |
|----------|-------------|
| `DefaultOptions()` | Returns default options (150x150, quality 85) |
| `Generate(src, opts)` | Creates a thumbnail from an image |
| `GenerateFromFile(path, opts)` | Loads an image and creates a thumbnail |
| `GenerateAndSave(in, out, opts)` | One-step thumbnail generation and save |
| `SaveJPEG(img, w, quality)` | Saves image as JPEG |
| `SavePNG(img, w)` | Saves image as PNG |
| `SaveGIF(img, w)` | Saves image as GIF |

## How It Works

The library uses high-quality CatmullRom interpolation from Go's `golang.org/x/image/draw` package. Thumbnails are generated by:

1. Calculating the target dimensions while preserving aspect ratio
2. Scaling the image using CatmullRom resampling
3. Encoding to the desired output format

## Requirements

- Go 1.16 or later

## Related Packages

- [imgutils-resize](https://github.com/imgutils-org/imgutils-resize) - Full-featured image resizing
- [imgutils-crop](https://github.com/imgutils-org/imgutils-crop) - Image cropping utilities
- [imgutils-sdk](https://github.com/imgutils-org/imgutils-sdk) - Unified SDK for all imgutils packages

## License

MIT License - see [LICENSE](LICENSE) for details.
